(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[652],{58173:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/claim-vela",function(){return n(8070)}])},8070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(47568);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var c=n(34051),i=n.n(c),o=n(85893),l=n(86e3),u=n(26166),d=n(57741),p=n(67294),h=n(64146),f=n(19485),x=n(61744),m=n(8198),w=n(241),b=n(96263),g="0x9A8cF02F3e56c664Ce75E395D0E4F3dC3DafE138",v="0x88aa4a6C5050b9A1b2Aa7e34D0582025cA6AB745",y="0xA31848AA61F784CDBb6F74260d224A4356295799",j="0x088cd8f5eF3652623c22D48b1605DCfE860Cd704",N="fde370ba010b45c6b2ca52b3260744b7",k=42161,A=1088,C="0xA4B1",E="0x440";function _(){var e=function(e){return Math.floor(1e3*e)/1e3},t=(0,p.useState)(),n=t[0],a=t[1],c=(0,p.useState)(0),_=c[0],S=c[1],D=(0,p.useState)(0),P=D[0],L=D[1],$=(0,p.useState)(0),B=$[0],I=$[1],V=(0,p.useState)(),F=V[0],Z=V[1],O=(0,p.useState)(!1),X=O[0],q=O[1],M=(0,p.useState)(!1),T=M[0],G=M[1],R=(0,p.useState)(),U=R[0],W=R[1],Q=(0,p.useState)(),z=Q[0],H=Q[1],J=(0,p.useRef)(null),Y=(0,p.useState)(0),K=Y[0],ee=Y[1],te=(0,p.useState)("/assets/video-stage-1.mp4"),ne=te[0],re=te[1],ae=(0,p.useState)("/assets/video-stage-1-thumbnail.jpeg"),se=ae[0],ce=ae[1],ie=(0,p.useMemo)((function(){return(0,o.jsx)("video",{autoPlay:!0,className:"min-h-96 min-w-96",muted:!0,onEnded:ge,poster:se,preload:"auto",ref:J,src:ne})}),[K,ne]);function oe(){return oe=(0,r.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.t0=s,e.next=5,window.ethereum.request({method:"eth_requestAccounts"});case 5:return e.t1=e.sent,t=(0,e.t0)(e.t1,1),n=t[0],e.next=10,a(n);case 10:e.next=15;break;case 12:e.prev=12,e.t2=e.catch(1),console.error("Unable to connect due to user rejection.");case 15:e.next=18;break;case 17:console.error("Unable to connect due to missing provider.");case 18:case"end":return e.stop()}}),e,null,[[1,12]])}))),oe.apply(this,arguments)}function le(){return le=(0,r.Z)(i().mark((function e(){var t,r,a,s,c,o,l,u,d,p,h,b;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("Wallet connection not detected.");case 3:return e.next=5,ee(0);case 5:return e.next=7,q(!0);case 7:return t=new w.Q(window.ethereum),e.next=10,t.getNetwork();case 10:if(r=e.sent.chainId,Number(r)===Number(F)){e.next=15;break}return e.next=14,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:F}]});case 14:t=new w.Q(window.ethereum);case 15:return a={destinationChainId:k,originChainId:F,senderAddress:f.getAddress(n),recipientAddress:f.getAddress(n),timestamp:Date.now(),tokenAddress:1===F?v:f.getAddress(y),tokenAmount:String(x.parseEther(String(_)))},e.next=18,fetch("https://dolphin-app-huj4m.ondigitalocean.app/bridge",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 18:return s=e.sent,e.next=21,s.text();case 21:return c=e.sent,e.next=24,W(c);case 24:for(o=t.getSigner(),l=new m.vU(["function transfer(address to, uint amount)"]),u=l.functions["transfer(address,uint256)"],d=l.encodeFunctionData(u,[g,x.parseEther(String(_))]),p="",h=0;h<c.length;h++)p+=""+c.charCodeAt(h).toString(16);return e.next=32,o.sendTransaction({to:1===F?v:y,data:d+p});case 32:return b=e.sent,e.next=35,b.wait();case 35:return e.next=37,ee(1);case 37:return e.next=39,G(!0);case 39:e.next=46;break;case 41:return e.prev=41,e.t0=e.catch(0),e.next=45,q(!1);case 45:console.error(e.t0);case 46:case"end":return e.stop()}}),e,null,[[0,41]])}))),le.apply(this,arguments)}function ue(){return ue=(0,r.Z)(i().mark((function e(t){var r,a,s,c,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=3;break}return e.abrupt("return",Promise.reject("Invalid event id."));case 3:return s="https://dolphin-app-huj4m.ondigitalocean.app/bridge/".concat(f.getAddress(n),"/bridgeEvent/").concat(t),e.next=6,fetch(s,{method:"get",headers:{"content-type":"application/json"}});case 6:return c=e.sent,e.next=9,c.json();case 9:if("Completed"!==(null===(o=e.sent)||void 0===o||null===(r=o._fieldsProto)||void 0===r||null===(a=r.status)||void 0===a?void 0:a.stringValue)){e.next=27;break}return e.next=13,de();case 13:return e.next=15,he();case 15:return e.next=17,H(!0);case 17:return e.next=19,W(void 0);case 19:return e.next=21,q(!1);case 21:return e.next=23,G(!1);case 23:return e.next=25,ee(2);case 25:e.next=28;break;case 27:console.log("waiting for bridge to finish");case 28:case"end":return e.stop()}}),e)}))),ue.apply(this,arguments)}function de(){return pe.apply(this,arguments)}function pe(){return(pe=(0,r.Z)(i().mark((function e(){var t,r,a,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("Wallet is not connected.");case 3:return t=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"}],r=new w.Q(window.ethereum),a=new h.Contract(1===F?v:y,t,r.getSigner()),e.next=8,a.balanceOf(n);case 8:s=e.sent,c=Number(x.formatEther(s)),L(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Could not fetch DXP balance.",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function he(){return fe.apply(this,arguments)}function fe(){return(fe=(0,r.Z)(i().mark((function e(){var t,r,a,s,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"}],r=new b.J("arbitrum",N),a=new h.Contract(j,t,r),e.next=6,a.balanceOf(n);case 6:s=e.sent,c=Number(x.formatEther(s)),I(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Could not fetch VELA balance.",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function xe(e){return me.apply(this,arguments)}function me(){return(me=(0,r.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new w.Q(window.ethereum),e.next=4,n.getNetwork();case 4:if(r=e.sent.chainId,Number(r)===Number(t)){e.next=8;break}return e.next=8,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:1===t?"0x1":E}]});case 8:Z(t),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function we(){return(we=(0,r.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:return e.next=4,he();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return(be=(0,r.Z)(i().mark((function e(){var t,n,r,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="VELA",n=18,r="https://vela.exchange/assets/icon-vela-token.jpeg",a=new w.Q(window.ethereum),e.next=7,a.getNetwork();case 7:if(s=e.sent.chainId,Number(s)===Number(k)){e.next=11;break}return e.next=11,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:C}]});case 11:return e.next=13,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:j,symbol:t,decimals:n,image:r}}});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}function ge(){return ve.apply(this,arguments)}function ve(){return ve=(0,r.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=J,0!==K){e.next=7;break}return e.next=5,ce("/assets/video-stage-2-thumbnail.jpeg");case 5:return e.next=7,re("/assets/video-stage-1.mp4");case 7:if(1!==K){e.next=12;break}return e.next=10,ce("/assets/video-stage-3-thumbnail.jpeg");case 10:return e.next=12,re("/assets/video-stage-2.mp4");case 12:if(2!==K){e.next=17;break}return e.next=15,ce("/assets/video-stage-1-thumbnail.jpeg");case 15:return e.next=17,re("/assets/video-stage-3.mp4");case 17:null===(t=n.current)||void 0===t||t.play();case 18:case"end":return e.stop()}}),e)}))),ve.apply(this,arguments)}(0,p.useEffect)((function(){var e;null===(e=J.current)||void 0===e||e.play()}),[ne]),(0,p.useEffect)((function(){var e;return T&&(e=setInterval((function(){!function(e){ue.apply(this,arguments)}(U)}),1e4)),function(){clearInterval(e)}}),[T]),(0,p.useEffect)((function(){"undefined"!==typeof n&&F&&function(){we.apply(this,arguments)}()}),[F,n]),(0,p.useEffect)((function(){"undefined"!==typeof n&&(1===Number(window.ethereum.networkVersion)?Z(1):Z(A))}),[n]),"undefined"!==typeof window.ethereum&&window.ethereum.on("accountsChanged",(function(e){var t=s(e,1)[0];a(f.getAddress(t))}));var ye=l.Z;return(0,o.jsxs)(ye,{metaData:{title:"Vela Exchange | Bridge $DXP -> $VELA"},children:[(0,o.jsxs)("section",{className:"py-6 md:py-12 flex flex-col justify-center items-center relative contentGradientShifted",children:[(0,o.jsx)("div",{className:"flex w-full justify-center",children:(0,o.jsx)(u.Z,{padded:!0})}),(0,o.jsxs)("div",{className:"w-full mx-auto text-center pt-12 lg:pt-24 contain-width",children:[(0,o.jsxs)("div",{className:"mb-12 lg:mb-0",children:[(0,o.jsx)("div",{className:"text-4xl lg:text-6xl font-bold gradientText",children:"$DXP to $VELA Converter"}),(0,o.jsx)("div",{className:"text-grey mt-12",children:"Bridge your $DXP into $VELA 1:1 by utilizing this mysterious portal."})]}),(0,o.jsxs)("div",{className:"aspect-square w-full flex flex-col items-end px-6 lg:px-0 lg:pt-72 lg:pr-36 contentPortal",children:[(0,o.jsx)("div",{className:"text-white text-2xl lg:text-3xl mb-12 font-bold  w-full lg:w-2/5 text-center ".concat(!n&&"opacity-25"),children:"Ready for the conversion?"}),(0,o.jsxs)("div",{className:"flex justify-between w-full lg:w-2/5 border border-1 border-white mb-12 rounded-lg networkPicker ".concat(1===F?"transparentGradientRight":"undefined"===typeof F?"":"transparentGradientLeft"," ").concat(!n&&"opacity-25 pointer-events-none"),children:[(0,o.jsx)("a",{className:"px-6 py-3 cursor-pointer ".concat(1===F?"font-bold":"opacity-50"),onClick:function(){return xe(1)},children:"Ethereum"}),(0,o.jsx)("a",{className:"px-6 py-3 cursor-pointer ".concat(F===A?"font-bold":"opacity-50"),onClick:function(){return xe(A)},children:"Metis"})]}),(0,o.jsxs)("div",{className:"flex w-full lg:w-2/5 mb-6 ".concat(!n&&"opacity-25"),children:[(0,o.jsxs)("div",{className:"w-1/2",children:[(0,o.jsx)("div",{className:"text-left text-xl mb-3",children:"$DXP in Wallet"}),(0,o.jsx)("div",{className:"text-left text-3xl",children:e(P)})]}),(0,o.jsxs)("div",{className:"w-1/2",children:[(0,o.jsx)("div",{className:"text-right text-xl mb-3",children:"$VELA in Wallet"}),(0,o.jsx)("div",{className:"text-right text-3xl",children:e(B)})]})]}),(0,o.jsx)("div",{className:"w-full lg:w-2/5 text-left pt-6 mb-6 topSeparatedLight ".concat(!n&&"opacity-25"),children:(0,o.jsxs)("label",{className:"".concat(!n&&"pointer-events-none"),onClick:function(){S(Math.floor(1e3*P)/1e3)},children:[(0,o.jsx)("input",{className:"mr-6 ".concat(!n&&"pointer-events-none"),type:"checkbox"}),"Add All $DXP"]})}),(0,o.jsxs)("div",{className:"w-full lg:w-2/5 mb-6",children:[(0,o.jsx)("input",{className:"block border border-1 rounded-lg py-3 px-6 w-full mb-6 inputText ".concat(!n&&"opacity-25 pointer-events-none"),min:"6",name:"amount",onChange:function(e){e.preventDefault(),0===e.target.value.length&&S(0),/^\d+(\.\d{1,8})?$/.test(e.target.value)&&S(parseFloat(e.target.value)),/^\d+\.0?$/.test(e.target.value)&&S(e.target.value)},type:"text",value:_}),(0,o.jsxs)("div",{className:"text-sm flex flex-wrap justify-center mb-12 text-grey ".concat(!n&&"opacity-25"),children:[(0,o.jsx)("div",{className:"w-full",children:"Relaychain fees are covered by the Vela Exchange team."}),(0,o.jsxs)("div",{className:"w-full mt-2",children:["Please join the"," ",(0,o.jsx)("a",{className:"underline",href:"https://discord.gg/relaychain-botb",rel:"noreferrer",target:"_blank",children:"Relaychain Discord"})," ","for additional support."]})]}),n&&(0,o.jsxs)("button",{className:"relative block w-full py-3 px-6 rounded-lg gradientBg ".concat((X||0===Number(_))&&"grayscale pointer-events-none"),onClick:function(){return le.apply(this,arguments)},type:"submit",children:["Convert",X&&(0,o.jsxs)("svg",{className:"absolute top-3 right-0 animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]})]}),n&&Number(B)>0&&(0,o.jsxs)("div",{className:"mt-6",children:["Have $VELA?"," ",(0,o.jsx)("a",{className:"underline",href:"https://app.camelot.exchange/liquidity/?token1=0x82aF49447D8a07e3bd95BD0d56f35241523fBab1&token2=0x088cd8f5eF3652623c22D48b1605DCfE860Cd704",rel:"noreferrer",target:"_blank",children:"Provide liquidity on Camelot for amazing rewards."})]}),!n&&(0,o.jsx)("button",{className:"block w-full py-3 px-6 rounded-lg gradientBg",onClick:function(){return oe.apply(this,arguments)},type:"submit",children:"Connect Wallet"}),z&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"statusBackgroundGood rounded-lg py-3 px-6 my-6 flex justify-center",children:[(0,o.jsxs)("svg",{className:"mr-3",fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{fill:"url(#paint0_linear_2904_12833)",height:"24",rx:"12",width:"24"}),(0,o.jsx)("g",{clipPath:"url(#clip0_2904_12833)",children:(0,o.jsx)("path",{d:"M10.6665 14.114L16.7945 7.98535L17.7378 8.92802L10.6665 15.9994L6.42383 11.7567L7.36649 10.814L10.6665 14.114Z",fill:"white"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"paint0_linear_2904_12833",x1:"12",x2:"12",y1:"0",y2:"24",children:[(0,o.jsx)("stop",{stopColor:"#0BCB58"}),(0,o.jsx)("stop",{offset:"1",stopColor:"#005B25"})]}),(0,o.jsx)("clipPath",{id:"clip0_2904_12833",children:(0,o.jsx)("rect",{fill:"white",height:"16",transform:"translate(4 4)",width:"16"})})]})]}),(0,o.jsx)("span",{className:"statusTextGood font-bold mr-3",children:"Success!"}),"Your $DXP has been exchanged for $VELA."]}),(0,o.jsx)("a",{className:"text-center border-b border-dotted cursor-pointer",onClick:function(){return be.apply(this,arguments)},children:"Add $VELA to wallet on Arbitrum."})]})]})]})]})]}),X&&(0,o.jsx)("div",{className:"position fixed top-0 left-0 h-screen w-screen justify-center flex items-center background-shadow",children:(0,o.jsxs)("div",{className:"w-96 h-96 background-black bg-cover",style:{backgroundImage:"url(".concat(se,")")},children:[(0,o.jsx)("div",{className:"w-96 h-96",children:ie}),(0,o.jsxs)("div",{className:"mt-6 text-center",children:[0===K&&(0,o.jsx)(o.Fragment,{children:"Please approve the transaction in your wallet."}),1===K&&(0,o.jsx)(o.Fragment,{children:"Awaiting blockchain confirmations ..."}),2===K&&(0,o.jsx)(o.Fragment,{children:"Briding $DXP to $VELA was successful."})]})]})}),(0,o.jsx)(d.Z,{cta:!1})]})}}},function(e){e.O(0,[503,102,972,724,834,885,159,193,774,888,179],(function(){return t=58173,e(e.s=t);var t}));var t=e.O();_N_E=t}]);